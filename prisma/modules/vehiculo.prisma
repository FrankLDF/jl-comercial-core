enum CondicionVehiculo {
  NUEVO
  USADO
}

enum EstadoIngreso {
  RECEPCION_ABIERTA
  EN_STOCK
  VENDIDO
}

model vehiculo {
  id                    Int      @id @default(autoincrement())

  chasis                String   @unique
  numero_maquina          String?   @unique
  placa                 String?  @unique

  id_marca              Int?
  id_modelo             Int?
  id_estilo             Int?
  id_color              Int?
  anio                  Int
  cilindraje            Int?

  marca_ref             marca?   @relation(fields: [id_marca], references: [id])
  modelo_ref            modelo?  @relation(fields: [id_modelo], references: [id])
  estilo_ref            estilo?  @relation(fields: [id_estilo], references: [id])
  color_ref             color?   @relation(fields: [id_color], references: [id])

  estado                String
  fecha_insercion       DateTime @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime? @updatedAt
  usuario_actualizacion String?

  ingresos              vehiculo_ingreso[]
}

model vehiculo_ingreso {
  id                    Int      @id @default(autoincrement())
  id_vehiculo           Int

  condicion             CondicionVehiculo
  costo_compra          Decimal  @db.Decimal(18,2)
  precio_venta_estimado Decimal  @db.Decimal(18,2)

  estado_ingreso        EstadoIngreso @default(EN_STOCK)
  fecha_ingreso         DateTime @default(now())

  estado                String
  fecha_insercion       DateTime @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime? @updatedAt
  usuario_actualizacion String?

  vehiculo              vehiculo @relation(fields: [id_vehiculo], references: [id])

  recepcion_detalle     recepcion_detalle?
  venta_detalle         venta_detalle?
}

