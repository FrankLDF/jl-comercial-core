generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
    url =     env("DATABASE_URL")
}

model pais {
  id            String     @id
  nombre        String     
  nacionalidad  String
  estado               String
  fecha_insercion      DateTime      @default(now())
  usuario_insercion    String
  fecha_actualizacion  DateTime?     @updatedAt
  usuario_actualizacion String?    
  provincias    provincia[]
  entidad    entidad[]
}

model provincia {
  id           Int     @id @default(autoincrement())
  id_pais      String  
  nombre       String
  estado               String
  fecha_insercion      DateTime      @default(now())
  usuario_insercion    String
  fecha_actualizacion  DateTime?     @updatedAt
  usuario_actualizacion String? 
  pais         pais    @relation(fields: [id_pais], references: [id])
  municipios   municipio[]
  entidad    entidad[]
}

model municipio {
  id            Int       @id @default(autoincrement())
  id_provincia  Int
  nombre        String
  estado               String
  fecha_insercion      DateTime      @default(now())
  usuario_insercion    String
  fecha_actualizacion  DateTime?     @updatedAt
  usuario_actualizacion String?    
  provincia     provincia @relation(fields: [id_provincia], references: [id])
  ciudades      ciudad[]
  entidad    entidad[]
}

model ciudad {
  id            Int       @id @default(autoincrement())
  id_municipio  Int
  nombre        String
  estado               String
  fecha_insercion      DateTime      @default(now())
  usuario_insercion    String
  fecha_actualizacion  DateTime?     @updatedAt
  usuario_actualizacion String?
  entidad    entidad[]
  municipio     municipio @relation(fields: [id_municipio], references: [id])
}


model tipo_doc_identidad {
  id       Int       @id @default(autoincrement())
  nombre   String
  estado               String
  fecha_insercion      DateTime      @default(now())
  usuario_insercion    String
  fecha_actualizacion  DateTime?     @updatedAt
  usuario_actualizacion String?
  entidad    entidad[]
}

model puesto {
  id                    Int        @id @default(autoincrement())
  nombre                String
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?


  personal              personal[]
}

model rol {
  id                    Int        @id @default(autoincrement())
  nombre                String
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?


  usuarios rol_usuario[]
}

model cliente {
  id Int @id @default(autoincrement())
  id_entidad Int @unique
  entidad entidad @relation(fields: [id_entidad], references: [id])
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?
}

model entidad {
  id                   Int           @id @default(autoincrement())
  tipo_entidad         String 
  tipo_doc_ident       Int 
  documento_ident      String 
  nombres              String 
  apellidos            String? 
  sexo                 String? 
  estado_civil                 String? 
  telefono                 String? 
  tipo_empleo                 String? 
  nombre_empresa_trabajo                 String?   
  ocupacion                 String?
  posicion_empresa                 String? 
  moneda_ingreso                 String?
  ingreso_promedio                 Int?
  otro_ingreso                Int?
  razon_otro_ingreso                String?
  email                 String? 
  id_pais              String? 
  id_provincia         Int? 
  id_municipio         Int? 
  id_ciudad            Int? 
  desc_direccion       String?
  fecha_nacimiento     DateTime? 
  estado               String
  fecha_insercion      DateTime      @default(now())
  usuario_insercion    String
  fecha_actualizacion  DateTime?     @updatedAt
  usuario_actualizacion String?


  personal personal?
  cliente cliente?
  proveedor proveedor?
  tipo_documento        tipo_doc_identidad @relation(fields: [tipo_doc_ident], references: [id])
  pais                  pais? @relation(fields: [id_pais], references: [id])
  provincia                  provincia? @relation(fields: [id_provincia], references: [id])
  municipio                  municipio? @relation(fields: [id_municipio], references: [id])
  ciudad                  ciudad? @relation(fields: [id_ciudad], references: [id])
}

model personal {
  id                    Int        @id @default(autoincrement())
  id_entidad            Int        @unique
  id_puesto             Int
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?

  entidad entidad @relation(fields: [id_entidad], references: [id])
  puesto puesto @relation(fields: [id_puesto], references: [id])
  usuario usuario?
}

model proveedor {
  id Int @id @default(autoincrement())
  id_entidad Int @unique
  entidad entidad @relation(fields: [id_entidad], references: [id])
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?
}


model rol_usuario {
  id_usuario Int
  id_rol     Int
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?

  usuario usuario @relation(fields: [id_usuario], references: [id])
  rol     rol     @relation(fields: [id_rol], references: [id])

  @@id([id_usuario, id_rol])
}

model usuario {
  id                    Int        @id @default(autoincrement())
  id_personal           Int        @unique
  nombre_usuario        String     @unique
  password              String
  estado                String
  fecha_insercion       DateTime   @default(now())
  usuario_insercion     String
  fecha_actualizacion   DateTime?  @updatedAt
  usuario_actualizacion String?


  personal  personal    @relation(fields: [id_personal], references: [id])
  rol     rol_usuario[]
}