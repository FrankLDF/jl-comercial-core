generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}


model TipoDocIdentidad {
  ID       Int       @id @default(autoincrement())
  NOMBRE   String
  ESTADO               String
  FECHA_INSERCION      DateTime      @default(now())
  USUARIO_INSERCION    String
  FECHA_ACTUALIZACION  DateTime?     @updatedAt
  USUARIO_ACTUALIZACION String?
  ENTIDAD  Entidad[]
}

model Entidad {
  ID                   Int           @id @default(autoincrement())
  TIPO_ENTIDAD         String
  NOMBRES              String
  APELLIDOS            String?
  SEXO                 String?
  FECHA_NACIMIENTO     DateTime?
  TIPO_DOC_IDENT       Int
  DOCUMENTO_IDENT      String
  ESTADO               String
  FECHA_INSERCION      DateTime      @default(now())
  USUARIO_INSERCION    String
  FECHA_ACTUALIZACION  DateTime?     @updatedAt
  USUARIO_ACTUALIZACION String?


  PERSONAL Personal?
  TIPO_DOCUMENTO        TipoDocIdentidad @relation(fields: [TIPO_DOC_IDENT], references: [ID])
}

model Puesto {
  ID                    Int        @id @default(autoincrement())
  NOMBRE                String
  ESTADO                String
  FECHA_INSERCION       DateTime   @default(now())
  USUARIO_INSERCION     String
  FECHA_ACTUALIZACION   DateTime?  @updatedAt
  USUARIO_ACTUALIZACION String?


  PERSONAL              Personal[]
}
model Personal {
  ID                    Int        @id @default(autoincrement())
  ID_ENTIDAD            Int        @unique
  ID_PUESTO             Int
  ESTADO                String
  FECHA_INSERCION       DateTime   @default(now())
  USUARIO_INSERCION     String
  FECHA_ACTUALIZACION   DateTime?  @updatedAt
  USUARIO_ACTUALIZACION String?

  ENTIDAD Entidad @relation(fields: [ID_ENTIDAD], references: [ID])
  PUESTO Puesto @relation(fields: [ID_PUESTO], references: [ID])
  USUARIO Usuario?
}

model Rol {
  ID                    Int        @id @default(autoincrement())
  NOMBRE                String
  ESTADO                String
  FECHA_INSERCION       DateTime   @default(now())
  USUARIO_INSERCION     String
  FECHA_ACTUALIZACION   DateTime?  @updatedAt
  USUARIO_ACTUALIZACION String?


  USUARIOS RolUsuario[]
}


model Usuario {
  ID                    Int        @id @default(autoincrement())
  ID_PERSONAL           Int        @unique
  NOMBRE_USUARIO        String     @unique
  PASSWORD              String
  ESTADO                String
  FECHA_INSERCION       DateTime   @default(now())
  USUARIO_INSERCION     String
  FECHA_ACTUALIZACION   DateTime?  @updatedAt
  USUARIO_ACTUALIZACION String?


  PERSONAL  Personal    @relation(fields: [ID_PERSONAL], references: [ID])
  ROL     RolUsuario[]
}

model RolUsuario {
  ID_USUARIO Int
  ID_ROL     Int
  ESTADO                String
  FECHA_INSERCION       DateTime   @default(now())
  USUARIO_INSERCION     String
  FECHA_ACTUALIZACION   DateTime?  @updatedAt
  USUARIO_ACTUALIZACION String?

  USUARIO Usuario @relation(fields: [ID_USUARIO], references: [ID])
  ROL     Rol     @relation(fields: [ID_ROL], references: [ID])

  @@id([ID_USUARIO, ID_ROL])
}



